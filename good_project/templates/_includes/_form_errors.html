{# Bloque de errores del formulario principal #}
{% if form.errors %}
<div id="form-errors" class="message error" aria-live="assertive" role="alert" tabindex="-1">
    <ul>
        {% for field, errors in form.errors.items %}
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
        {% endfor %}
    </ul>
</div>
{% endif %}

{# Bloque de errores del formset de ingredientes #}
{% if ingredient_formset.non_form_errors or ingredient_formset.errors %}
<div id="ingredient-formset-errors" class="message error" aria-live="assertive" role="alert" tabindex="-1">
    <ul>
        {# Errores generales del formset (no ligados a campos) #}
        {% for error in ingredient_formset.non_form_errors %}
            <li>{{ error }}</li>
        {% endfor %}

        {# Errores espec√≠ficos por formulario en el formset #}
        {% for form_error in ingredient_formset.errors %}
            {% for field, errors in form_error.items %}
                {% for error in errors %}
                    {% if error %}
                        <li><strong>{{ field }}:</strong> {{ error }}</li>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        {% endfor %}
    </ul>
</div>
{% endif %}
