export function initIngredientHandlers(){const e=document.querySelector("#ingredient-forms tbody"),t=document.querySelector('[name="ingredients-TOTAL_FORMS"]'),n=document.getElementById("add-ingredient"),r=document.querySelector("#id_ingredients-TOTAL_FORMS");e&&t&&n&&r&&(n.addEventListener("click",n=>{if(n.preventDefault(),!function(){const t=e.querySelector("tr:last-child"),n=t.querySelector('input[name$="-ingredient_name"]').value.trim(),r=t.querySelector('input[name$="-quantity"]').value.trim(),l=t.querySelector('select[name$="-unit"], input[name$="-unit"]').value.trim();return!!(n&&r&&l)||(alert("Por favor, completa todos los campos del ingrediente actual antes de aÃ±adir otro."),!1)}())return;const r=parseInt(t.value),l=e.querySelector("tr:last-child").cloneNode(!0);l.querySelectorAll("input, select, textarea, label").forEach(e=>{e.name&&(e.name=e.name.replace(/-(\d+)-/,`-${r}-`)),e.id&&(e.id=e.id.replace(/-(\d+)-/,`-${r}-`)),"LABEL"===e.tagName&&e.htmlFor&&(e.htmlFor=e.htmlFor.replace(/-(\d+)-/,`-${r}-`)),"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||"hidden"===e.type&&e.name.endsWith("-id")||(e.value=""),"SELECT"===e.tagName&&(e.selectedIndex=0)});const a=l.querySelector(".btn__delete");a&&(a.classList.replace("btn__delete","btn__yellow"),a.textContent="Cancelar",a.setAttribute("aria-label","Cancelar ingrediente")),t.value=r+1,e.appendChild(l)}),e.addEventListener("click",n=>{if(n.target.classList.contains("btn__yellow")){n.preventDefault();n.target.closest("tr").remove();const r=e.querySelectorAll("tr");t.value=r.length,r.forEach((e,t)=>{e.querySelectorAll("input, select, textarea, label").forEach(e=>{e.name&&(e.name=e.name.replace(/ingredients-(\d+)-/,`ingredients-${t}-`)),e.id&&(e.id=e.id.replace(/ingredients-(\d+)-/,`ingredients-${t}-`)),"LABEL"===e.tagName&&e.htmlFor&&(e.htmlFor=e.htmlFor.replace(/ingredients-(\d+)-/,`ingredients-${t}-`))})})}}),document.querySelectorAll(".btn__delete").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest("tr"),n=t.querySelector('input[type="checkbox"][name$="-DELETE"]');n&&(n.checked=!0,t.style.display="none")})}),document.querySelectorAll(".btn__yellow").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest("tr");t&&t.remove()})}))}