const Quill=window.Quill;class AccessibleToolbar extends(Quill.import("modules/toolbar")){constructor(e,t){super(e,t),this.observeToolbar()}observeToolbar(){const e=new MutationObserver(()=>{const t=this.container?.querySelector(".ql-picker-label");t&&(this.addAriaLabelsToPickers(),this.addAriaLabelsToButtons(),this.addAriaLabelsToPickerItems(),e.disconnect())});this.container&&e.observe(this.container,{childList:!0,subtree:!0})}addAriaLabelsToPickers(){const e={"ql-header":"Selector de encabezado","ql-size":"Selector de tamaño de fuente","ql-color":"Selector de color de texto","ql-background":"Selector de color de fondo","ql-align":"Selector de alineación","ql-font":"Selector de fuente","ql-list":"Selector de lista","ql-direction":"Selector de dirección del texto"};this.container.querySelectorAll(".ql-picker").forEach(t=>{const a=t.querySelector(".ql-picker-label");if(a&&!a.getAttribute("aria-label")){let o=!1;for(const r in e)if(t.classList.contains(r)){a.setAttribute("aria-label",e[r]),a.setAttribute("role","button"),a.setAttribute("aria-haspopup","listbox"),a.setAttribute("aria-expanded","false"),o=!0;break}o||(a.setAttribute("aria-label","Selector"),a.setAttribute("role","button"),a.setAttribute("aria-haspopup","listbox"),a.setAttribute("aria-expanded","false"))}})}addAriaLabelsToButtons(){this.container.querySelectorAll('button[class^="ql-"]').forEach(e=>{const t=e.className.match(/ql-([a-z]+)/);if(t&&t[1]&&!e.hasAttribute("aria-label")){const a={bold:"Negrita",italic:"Cursiva",underline:"Subrayado",strike:"Tachado",list:"Lista",ordered:"Lista ordenada",bullet:"Lista con viñetas",link:"Enlace",image:"Imagen",video:"Vídeo",clean:"Limpiar formato",align:"Alineación",color:"Color de texto",background:"Color de fondo",header:"Encabezado",size:"Tamaño del texto"}[t[1]]||`Formato ${t[1]}`;e.setAttribute("aria-label",a)}})}addAriaLabelsToPickerItems(){this.container.querySelectorAll(".ql-picker-options").forEach(e=>{e.querySelectorAll(".ql-picker-item").forEach(e=>{if(!e.hasAttribute("aria-label")){const t=`Opción: ${e.getAttribute("data-value")||e.innerText||"sin nombre"}`.replace(/[-_]/g," ");e.setAttribute("aria-label",t.trim()),e.setAttribute("role","option")}})})}}Quill.register("modules/toolbar",AccessibleToolbar,!0);export default AccessibleToolbar;