export async function fetchFormSubmit({form:t,containerId:e,showSpinner:r,hideSpinner:o,onSuccess:n,onError:i}){const s=t.action,c=t.method||"POST",u=new FormData(t);r&&r("saving");try{const r=await fetch(s,{method:c,body:u,headers:{"X-Requested-With":"XMLHttpRequest"}}),a=await r.json();if(o&&o(),"error"===a.status){if(e){e.innerHTML=a.errors_html||"",e.setAttribute("tabindex","-1"),e.focus(),setTimeout(()=>{e.removeAttribute("tabindex")},1e3),"function"==typeof i&&i(a);const r=t.querySelector('[type="submit"]');return void(r&&(r.disabled=!1))}return}"success"===a.status&&a.redirect_url&&("function"==typeof n?n(a):window.location.href=a.redirect_url)}catch(e){o&&o();const r=t.querySelector('[type="submit"]');r&&(r.disabled=!1)}}